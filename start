#!/bin/bash

# Remove old database if it exists
rm ./backend/data/data.db

# Create a new SQLite database and set up the table + data
sqlite3 ./backend/data/data.db <<EOF
-- Create the table
CREATE TABLE tblTasks (
    ID TEXT PRIMARY KEY,
    Name TEXT NOT NULL,
    Description TEXT,
    DueDate TEXT,
    Priority TEXT,
    Location TEXT,
    Status TEXT
);

-- Insert sample data
INSERT INTO tblTasks (ID, Name, Description, DueDate, Priority, Location, Status) VALUES
('1', 'Buy supplies', 'Pick up items for the week', '2025-04-10', 'High', 'Grocery Store', 'Pending'),
('2', 'Go to appointment', 'Attend scheduled appointment', '2025-04-12', 'Medium', 'Work', 'Scheduled'),
('3', 'Finish assignment', 'Complete and review assignment', '2025-04-11', 'High', 'School', 'In Progress'),
('4', 'Fix something', 'Handle small repair', '2025-04-13', 'Low', 'Home', 'Pending'),
('5', 'Team check-in', 'Discuss current tasks', '2025-04-09', 'Medium', 'Work', 'Completed'),
('6', 'Do chores', 'Clean up and organize', '2025-04-08', 'Low', 'Home', 'Completed'),
('7', 'Plan task', 'Prepare for upcoming event', '2025-04-15', 'High', 'Home', 'Pending'),
('8', 'Study', 'Read assigned chapters', '2025-04-10', 'Low', 'Library', 'In Progress');
EOF

echo "Database 'data.db' has been created and populated."

(cd backend && node ./index.js)
